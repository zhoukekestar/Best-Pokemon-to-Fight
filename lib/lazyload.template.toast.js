!function(){try{localStorage.setItem("localStorage-test-available","a"),localStorage.removeItem("localStorage-test-available")}catch(e){localStorage.setItem=function(){},localStorage.getItem=function(){}}var t=localStorage.getItem("TOOMAO-CLIENT-ID")||Date.now()+(Math.random()+"").substr(-8);localStorage.setItem("TOOMAO-CLIENT-ID",t);var n=function(e){var n=document.cookie.match(/sessionToken=([^;]*)(;|$)/);n&&e.setRequestHeader("X-AVOSCloud-Session-Token",n[1]),"true"===this.getAttribute("data-void-repeat")&&(this._voidRepeatID=this._voidRepeatID||Date.now(),e.setRequestHeader("X-TRANSACTION-ID",this._voidRepeatID)),localStorage&&e.setRequestHeader("X-CLIENT-ID",t)},o=function(e){403!==e.status&&(e.status/100>>0===5?(window.toast||window.alert)("后台系统错误，请稍后再试"):(window.toast||window.alert)(e.response&&e.response.error||"系统错误"))};document.body.addEventListener("submit",function(e){e.target._beforeSend=e.target._beforeSend||n,e.target.onerror=e.target.onerror||o}),document.body.addEventListener("formJSON-submit",function(e){e.target._beforeSend=e.target._beforeSend||n,e.target.onerror=e.target.onerror||o}),console._logurl="//common.toomao.com/log",document.body.clientWidth>740&&(/m\.toomao\.com/.test(location.host)||/:3002/.test(location.host))&&(document.body.style.width="540px",document.body.style.margin="0 auto");var a=function(){var e=(e=(" "+document.cookie).match(/[; ]csr=([^;]*)/))&&e[1];if(!(e&&e.length>0)||(e=new RegExp(decodeURIComponent(e)),e.test(location.href))){var t=(t=(" "+document.cookie).match(/[; ]cs=([^;]*)/))&&t[1];if(t&&t.length>0){if(t=decodeURIComponent(t),0===t.indexOf("/"))t="//"+location.host+t;else{if(0!==t.indexOf("STATIC"))return;t="//static.toomao.com"+t.replace("STATIC","")}var n=document.createElement("script");n.src=t,document.body.appendChild(n)}}};"complete"===document.readyState||"interactive"===document.readyState?a():document.addEventListener("readystatechange",function(e){"interactive"===document.readyState&&a()})}(),!function(e){"function"==typeof define&&define.amd?define("lazyload",e):e()}(function(){function e(e,t){var n=new Image,o=e.getAttribute("data-src");n.onload=function(){e.src=o,t?t.call(e):null},n.onerror=function(){e.src=r,t?t.call(e):null},n.src=o}function t(e,t){var n=new Image,o=e.getAttribute("data-backgroundimage");n.onload=function(){e.style.backgroundImage="url("+o+")",t?t.call(e):null},n.onerror=function(){e.style.backgroundImage="url("+r+")",t?t.call(e):null},n.src=o}function n(e){var t=e.getBoundingClientRect();return t.top+t.bottom+t.left+t.right+t.height+t.width===0?!1:t.top>=0&&t.top<=(window.innerHeight||document.documentElement.clientHeight)+100&&t.left>=0&&t.left<(window.innerWidth||document.documentElement.clientWidth)}function o(){for(var o=0;o<a.length;o++)!a[o].lazyloaded&&n(a[o])&&e(a[o],function(){this.lazyloaded=!0,this.classList.remove("lazy")});for(var o=0;o<i.length;o++)!i[o].lazyloaded&&n(i[o])&&t(i[o],function(){this.lazyloaded=!0,this.classList.remove("lazy")})}var a=[],r="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",i=[],c=function(e){a=Array.prototype.slice.apply(document.querySelectorAll("img.lazy"));for(var t=0;t<a.length;t++)a[t].src=a[t].src||r;i=Array.prototype.slice.apply(document.querySelectorAll(".lazy[data-backgroundimage]"));for(var t=0;t<i.length;t++)i[t].style.backgroundImage="url("+(i[t].style.backgroundImage||r)+")";o(),e||(window.addEventListener("scroll",o),window.addEventListener("touchend",o),window.addEventListener("touchmove",o),setInterval(function(){o()},1e3))};document.addEventListener("lazyload-reload",function(){c(!0)}),document.addEventListener("reload",function(){c(!0)}),"complete"===document.readyState?c():document.addEventListener("readystatechange",function(e){"complete"===document.readyState&&c()})}),!function(e){"function"==typeof define&&define.amd?define("template",e):e()}(function(){var e=function(e){var t="var _p = [], print = Array.prototype.push.bind(_p); with(obj) { _p.push(`"+e.replace(/<!--[\s\S]*?-->/g,"").replace(/\/\*[\s\S]*?\*\//g,"").replace(/[\r\n]/g,"\x0B").replace(/<%=(.*?)%>/g,function(e,t){return"`); _p.push("+t.replace(/'/g,"`")+"); _p.push(`"}).replace(/<%(.*?)%>/g,function(e,t){return"<%"+t.replace(/'/g,"`")+"%>"}).replace(/<%/g,"`);").replace(/%>/g,"; _p.push(`")+"`);}return _p.join(``);";t=t.replace(/'/g,"\\'"),t=t.replace(/`/g,"'");var n=new Function("obj",t);return{fn:n,code:t}},t=function(e){try{var t=+e.stack.match(/<anonymous>:3:(\d*)\)/)[1],n=this._code;n=n.substring(0,t)+"__ERROR__"+n.substring(t),n=n.replace("var p = [], print = Array.prototype.push.bind(p); with(obj) { p.push('","").replace("');}return p.join('');","").replace(/'\);\sp\.push\((.*?)\);\sp\.push\('/g,"<%=$1%>").replace(/;\sp\.push\('/g,"%>").replace(/'\);/g,"<%"),n=n.replace(/\v/g,"\r\n");for(var o=n.indexOf("__ERROR__"),a=n.length,r=o;a>r;r++)if("\r"===n[r]||"\n"===n[r]){o=r;break}n=n.substring(0,o)+"  ------------------------> ERROR"+n.substring(o),n=n.replace("__ERROR__",""),console.log(n)}catch(e){console.log(e)}},n="_",o=function(e){try{var o=this[n+"holder"]||this.getAttribute("data-holder")&&document.querySelector(this.getAttribute("data-holder"));if(!o)return void console.log("Holder is empty.");o.innerHTML=this[n+"fn"](e),document.dispatchEvent(new Event("webcom-reload"))}catch(a){console.log(a),t.call(this,a)}},a=function(e){try{var o=this[n+"holder"]||this.getAttribute("data-holder")&&document.querySelector(this.getAttribute("data-holder"));if(!o)return void console.log("Holder is empty.");var a=this.getAttribute("data-wrapper");if(a)for(a=document.createElement(a),a.innerHTML=this[n+"fn"](e);a.children.length>0;)o.appendChild(a.children[0]);else o.innerHTML+=this[n+"fn"](e);document.dispatchEvent(new Event("webcom-reload"))}catch(r){console.log(r),t.call(this,r)}},r=function(e){try{return this[n+"fn"](e)}catch(o){console.log(o),t.call(this,o)}},i=function(){for(var t,i=0,c=document.querySelectorAll('[data-role="template"]'),d=c.length;d>i;i++)if(t=c[i],void 0===t[n+"inited"]){t[n+"inited"]=!0;var l=e(t.innerHTML);t[n+"fn"]=l.fn,t[n+"code"]=l.code,t[n+"updateBy"]=o.bind(t),t[n+"appendBy"]=a.bind(t),t[n+"htmlBy"]=r.bind(t)}};return"complete"===document.readyState||"interactive"===document.readyState?i():document.addEventListener("readystatechange",function(e){"interactive"===document.readyState&&i()}),document.addEventListener("reload",i),document.addEventListener("template-reload",i),document.addEventListener("template-reload-it",function(t){if("template"===t.target.getAttribute("data-role")){t.target[n+"inited"]=!0;var i=e(t.target.innerHTML);t.target[n+"fn"]=i.fn,t.target[n+"code"]=i.code,t.target[n+"updateBy"]=o.bind(t.target),t.target[n+"appendBy"]=a.bind(t.target),t.target[n+"htmlBy"]=r.bind(t.target)}}),null}),!function(e){"function"==typeof define&&define.amd?define("toast",e):e()}(function(){var e=null,t=function(t){var n,o={width:160,content:"显示信息为空",done:null,time:1200,autohide:!0};if("string"==typeof t)o.content=t,t=o;else{for(var a in t)o[a]=t[a];t=o}return e||(e=document.createElement("div"),e.classList.add("toast"),document.body.appendChild(e)),e.innerHTML=t.content,e.style.display="block",setTimeout(function(){e.style.marginTop="-"+window.getComputedStyle(e).height.replace(/px/,"")/2+"px",e.style.opacity="1"},10),t.autohide&&setTimeout(function(){e.style.opacity=0,setTimeout(function(){e.style.cssText="","function"==typeof n&&n(),"function"==typeof t.done&&t.done()},1e3)},t.time),{then:function(e){n=e}}};return window.toast=window.toast||t,t});