!function(e){"function"==typeof define&&define.amd?define("lazyload",e):e()}(function(){function e(e,t){var n=new Image,r=e.getAttribute("data-src");n.onload=function(){e.src=r,t?t.call(e):null},n.onerror=function(){e.src=a,t?t.call(e):null},n.src=r}function t(e,t){var n=new Image,r=e.getAttribute("data-backgroundimage");n.onload=function(){e.style.backgroundImage="url("+r+")",t?t.call(e):null},n.onerror=function(){e.style.backgroundImage="url("+a+")",t?t.call(e):null},n.src=r}function n(e){var t=e.getBoundingClientRect();return t.top+t.bottom+t.left+t.right+t.height+t.width!==0&&(t.top>=0&&t.top<=(window.innerHeight||document.documentElement.clientHeight)+100&&t.left>=0&&t.left<(window.innerWidth||document.documentElement.clientWidth))}function r(){for(var r=0;r<o.length;r++)!o[r].lazyloaded&&n(o[r])&&e(o[r],function(){this.lazyloaded=!0,this.classList.remove("lazy")});for(var r=0;r<i.length;r++)!i[r].lazyloaded&&n(i[r])&&t(i[r],function(){this.lazyloaded=!0,this.classList.remove("lazy")})}var o=[],a="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",i=[],c=function(e){o=Array.prototype.slice.apply(document.querySelectorAll("img.lazy"));for(var t=0;t<o.length;t++)o[t].src=o[t].src||a;i=Array.prototype.slice.apply(document.querySelectorAll(".lazy[data-backgroundimage]"));for(var t=0;t<i.length;t++)i[t].style.backgroundImage="url("+(i[t].style.backgroundImage||a)+")";r(),e||(window.addEventListener("scroll",r),window.addEventListener("touchend",r),window.addEventListener("touchmove",r),setInterval(function(){r()},1e3))};document.addEventListener("lazyload-reload",function(){c(!0)}),document.addEventListener("reload",function(){c(!0)}),"complete"===document.readyState?c():document.addEventListener("readystatechange",function(e){"complete"===document.readyState&&c()})}),!function(e){"function"==typeof define&&define.amd?define("template",e):e()}(function(){var e=function(e){var t="var _p = [], print = Array.prototype.push.bind(_p); with(obj) { _p.push(`"+e.replace(/<!--[\s\S]*?-->/g,"").replace(/\/\*[\s\S]*?\*\//g,"").replace(/[\r\n]/g,"\v").replace(/<%=(.*?)%>/g,function(e,t){return"`); _p.push("+t.replace(/'/g,"`")+"); _p.push(`"}).replace(/<%(.*?)%>/g,function(e,t){return"<%"+t.replace(/'/g,"`")+"%>"}).replace(/<%/g,"`);").replace(/%>/g,"; _p.push(`")+"`);}return _p.join(``);";t=t.replace(/'/g,"\\'"),t=t.replace(/`/g,"'");var n=new Function("obj",t);return{fn:n,code:t}},t=function(e){try{var t=+e.stack.match(/<anonymous>:3:(\d*)\)/)[1],n=this._code;n=n.substring(0,t)+"__ERROR__"+n.substring(t),n=n.replace("var p = [], print = Array.prototype.push.bind(p); with(obj) { p.push('","").replace("');}return p.join('');","").replace(/'\);\sp\.push\((.*?)\);\sp\.push\('/g,"<%=$1%>").replace(/;\sp\.push\('/g,"%>").replace(/'\);/g,"<%"),n=n.replace(/\v/g,"\r\n");for(var r=n.indexOf("__ERROR__"),o=n.length,a=r;a<o;a++)if("\r"===n[a]||"\n"===n[a]){r=a;break}n=n.substring(0,r)+"  ------------------------> ERROR"+n.substring(r),n=n.replace("__ERROR__",""),console.log(n)}catch(e){console.log(e)}},n="_",r=function(e){try{var r=this[n+"holder"]||this.getAttribute("data-holder")&&document.querySelector(this.getAttribute("data-holder"));if(!r)return void console.log("Holder is empty.");r.innerHTML=this[n+"fn"](e),document.dispatchEvent(new Event("webcom-reload"))}catch(e){console.log(e),t.call(this,e)}},o=function(e){try{var r=this[n+"holder"]||this.getAttribute("data-holder")&&document.querySelector(this.getAttribute("data-holder"));if(!r)return void console.log("Holder is empty.");var o=this.getAttribute("data-wrapper");if(o)for(o=document.createElement(o),o.innerHTML=this[n+"fn"](e);o.children.length>0;)r.appendChild(o.children[0]);else r.innerHTML+=this[n+"fn"](e);document.dispatchEvent(new Event("webcom-reload"))}catch(e){console.log(e),t.call(this,e)}},a=function(e){try{return this[n+"fn"](e)}catch(e){console.log(e),t.call(this,e)}},i=function(){for(var t,i=0,c=document.querySelectorAll('[data-role="template"]'),d=c.length;i<d;i++)if(t=c[i],void 0===t[n+"inited"]){t[n+"inited"]=!0;var l=e(t.innerHTML);t[n+"fn"]=l.fn,t[n+"code"]=l.code,t[n+"updateBy"]=r.bind(t),t[n+"appendBy"]=o.bind(t),t[n+"htmlBy"]=a.bind(t)}};return"complete"===document.readyState||"interactive"===document.readyState?i():document.addEventListener("readystatechange",function(e){"interactive"===document.readyState&&i()}),document.addEventListener("reload",i),document.addEventListener("template-reload",i),document.addEventListener("template-reload-it",function(t){if("template"===t.target.getAttribute("data-role")){t.target[n+"inited"]=!0;var i=e(t.target.innerHTML);t.target[n+"fn"]=i.fn,t.target[n+"code"]=i.code,t.target[n+"updateBy"]=r.bind(t.target),t.target[n+"appendBy"]=o.bind(t.target),t.target[n+"htmlBy"]=a.bind(t.target)}}),null}),!function(e){"function"==typeof define&&define.amd?define("toast",e):e()}(function(){var e=null,t=function(t){var n,r={width:160,content:"显示信息为空",done:null,time:1200,autohide:!0};if("string"==typeof t)r.content=t,t=r;else{for(var o in t)r[o]=t[o];t=r}return e||(e=document.createElement("div"),e.classList.add("toast"),document.body.appendChild(e)),e.innerHTML=t.content,e.style.display="block",setTimeout(function(){e.style.marginTop="-"+window.getComputedStyle(e).height.replace(/px/,"")/2+"px",e.style.opacity="1"},10),t.autohide&&setTimeout(function(){e.style.opacity=0,setTimeout(function(){e.style.cssText="","function"==typeof n&&n(),"function"==typeof t.done&&t.done()},1e3)},t.time),{then:function(e){n=e}}};return window.toast=window.toast||t,t}),!function(e){"function"==typeof define&&define.amd?define("formJSON",e):e()}(function(){var e,t=function(){var e,t,n=[],r=function(t){return t.forEach?t.forEach(r):void n.push({name:e,value:t})};return[].slice.apply(this.elements||this.querySelectorAll("input,textarea")).forEach(function(n){t=n.type,e=n.name,e&&"fieldset"!==n.nodeName.toLowerCase()&&!n.disabled&&"submit"!==t&&"reset"!==t&&"button"!==t&&"file"!==t&&("radio"!==t&&"checkbox"!==t||n.checked)&&r(n.value)}),n},n=function(e,t,r){var o=t[0];if(1===t.length)return void(""===o?e.push(r):e[o]=r);t.length>1&&"undefined"==typeof e[o]&&(e[o]=""===t[1]?[]:{});var a=e[o];return t.shift(),n(a,t,r)},r=function(e,t,o){var a,i=!0,c=[];t=t||[],o=o||e;for(var d in o)a=t.concat(),isNaN(+d)?i=!1:c.push(o[d]),a.push(d),"object"!=typeof o[d]||Array.isArray(o[d])||r(e,a,o[d]);return i&&(0===t.length?e=c:n(e,t,c)),e},o=function(e,o,a){var i,c=this,d=c.getAttribute("method")||"POST";if(c._running)return void console.log("form submiting. return.");if(i={},t.call(c).forEach(function(e){var t,r=e.name.split("."),o=r.length-1,a=r[o].indexOf(":"),c=e.value;a!==-1?(t=r[o].substr(a+1),r[o]=r[o].substr(0,a)):t="string","array"===t||"object"===t?c=JSON.parse(c):"number"===t?c=+c:"datetime"===t?(c.indexOf("T")===-1?(c=c.replace(" ","T"),c=new Date(c+"Z"),c=new Date(c.getTime()+60*c.getTimezoneOffset()*1e3)):c=new Date(c+"Z"),c="Invalid Date"===c.toString()?"":c.getTime()):"date"===t?(c=new Date(c),c="Invalid Date"===c.toString()?"":c.getTime()):"bool"!==t&&"boolean"!==t||(c="false"!==c&&!!c),n(i,r,c)}),o.parseInteger&&(i=r(i)),i=o.data.call(c,i),"GET"===d){for(var l=Object.keys(i||{}),u=[],s=0,p=l.length;s<p;s++)"string"==typeof i[l[s]]?u.push(encodeURIComponent(l[s])+"="+encodeURIComponent(i[l[s]])):u.push(encodeURIComponent(l[s])+"="+encodeURIComponent(JSON.stringify(i[l[s]])));i=u.join("&")}else i=JSON.stringify(i);if("null"!==i){var f=new XMLHttpRequest;f.timeout=2e4,a=void 0===a?c.getAttribute("action")||location.href:a,"GET"===d&&(a+=a.indexOf("?")===-1?"?"+i:"&"+i),f.open(d,a,!0),f.setRequestHeader("Content-Type","application/json"),c._beforeSend&&c._beforeSend.call(c,f),f.responseType="json",f.onreadystatechange=function(){if(4===f.readyState){c._running=!1;var e=c._done&&c._done(f);if(null===e)return;f=e||f;var t={};if(["status","response","statusText","readyState","responseText"].forEach(function(e){try{t[e]=f[e]}catch(e){}}),f.status>=200&&f.status<300){if("string"==typeof f.response){try{t.response=JSON.parse(t.response)}catch(e){t.response={}}o.ended.call(c,t.response,t),c._XMLHttpRequest=t}else o.ended.call(c,f.response,f),c._XMLHttpRequest=f;c.dispatchEvent(new Event("formJSON-ended",{bubbles:!0}))}else{if("string"==typeof f.response){try{t.response=JSON.parse(t.response)}catch(e){t.response={}}o.error.call(c,t),c._XMLHttpRequest=t}else o.error.call(c,f),c._XMLHttpRequest=f;c.dispatchEvent(new Event("formJSON-error",{bubbles:!0}))}}},c._running=!0,"GET"===d?f.send():f.send(i)}};document.addEventListener("click",function(t){var n=t.target;"submit"===n.type&&n.getAttribute("formAction")&&(e=n.getAttribute("formAction")),setTimeout(function(){e=void 0},1e3)});var a=function(t){var n=t.target;if("formJSON"===n.getAttribute("data-role")){t.preventDefault(),t.stopPropagation();var r=(r=n.getAttribute("data-target"))&&document.querySelector(r),a="false"!==n.getAttribute("data-parseInteger"),i={parseInteger:a,ended:n.onended||r&&r.onended||function(){},data:n._data||r&&r._data||function(e){return e},error:n.onerror||r&&r.onerror||function(){}};o.call(n,t,i,e)}};document.addEventListener("submit",a),document.addEventListener("formJSON-submit",a);var i=HTMLFormElement.prototype.submit;return HTMLFormElement.prototype.submit=function(){"formJSON"===this.getAttribute("data-role")?this.dispatchEvent(new Event("formJSON-submit",{bubbles:!0})):i.call(this)},null});